# AI MULTI-TENANT PDF SUMMARIZATION USING AMAZON BEDROCK

## 1. PROJECT OVERVIEW: 

This project establishes a **highly available and secure PDF summarization service** leveraging key components of the Amazon Web Services (AWS) cloud platform. The service allows users to upload a PDF file via a public endpoint, receive a summary generated by a large language model, and securely persist both the raw and summarized data. The architecture is designed for **high resilience** across multiple Availability Zones (AZs) and adheres strictly to the **principle of least privilege** for security.

## SERVICE LAYER BREAKDOWN :

* **COMPUTE AND PRESENTATION LAYER:**
  
    *  This layer is responsible for handling user requests and performing the core processing logic.
  
    * **Application Load Balancer (ALB):** Acts as the single entry point for user traffic, automatically distributing incoming requests across healthy EC2 instances in the Auto Scaling Group.
      
    * **AUTO SCALING GROUP(ASG) & AMAZON EC2:** The core compute resource. The ASG ensures the application maintains optimal capacity by automatically adjusting the number of EC2 instances based on demand, providing elasticity and fault tolerance. EC2 instances execute the application code, managing the file upload, calling the Bedrock model, and managing data persistence.
      
    * **BASTION HOST:** A hardened instance located in the public subnet, used as a secure jump box to connect and manage the private EC2 instances, ensuring the primary compute resources are never directly exposed to the internet.

* **DATA AND SECURITY LAYER:**
  
    *  This layer handles storage, database operations, and encryption key management.
  
    * **Amazon Simple Storage Service (S3):** Used for **secure, durable storage** of the original, raw PDF files.
      
    * **Amazon Relational Database Service (RDS):** Provides a managed, scalable relational database (like PostgreSQL or MySQL) to store the final, **summarized text** from the PDFs.
      
    * **AWS Key Management Service (KMS):** A crucial security component used to create and manage cryptographic keys. Specifically, a **Customer Managed Key (CMK)** is used for **Server-Side Encryption with KMS (SSE-KMS)** to encrypt both the data in S3 , meeting strict compliance and security requirements.

    * **ML & MONITORING LAYER:** This layer encompasses the machine learning and operational visibility components.
  
    * **Amazon Bedrock (Titan Text G1 – Express):** Provides the managed Large Language Model (LLM) service. The EC2 instance invokes this foundation model to perform the text summarization task on the content extracted from the raw PDF stored in S3.
      
    * **Amazon CloudWatch:** Used for **monitoring and observability**. It collects and tracks metrics, logs, and events from all AWS resources (ALB, EC2, ASG, etc.), allowing for performance tuning, health checks, and setting up alarms for immediate issue notification.

* **NETWORKING LAYER:**
  
    * Defines the secure and isolated environment.
  
    * **Virtual Private Cloud (VPC):** The isolated, private network in AWS.
      
    * **Public and Private Subnets:** Resources that need public internet access (ALB, Bastion Host) reside in **Public Subnets**. Critical application components (EC2, RDS, Bedrock endpoint access) reside in **Private Subnets**, isolated from direct public access.
      
    * **Internet Gateway (IGW):** Allows communication between resources in the VPC and the internet (for inbound traffic to the ALB).
      
    * **NAT Gateway (NAT GW):** Allows resources in the **Private Subnets** (like EC2) to initiate outbound connections to the internet or other AWS services (like Bedrock or S3 endpoints) without exposing them to inbound public traffic.

---

## 2. ARCHITECTURE DIAGRAM

<img width="1353" height="696" alt="Architecture" src="https://github.com/user-attachments/assets/d4e7faeb-b3bc-43bc-a14c-87bc6fc7f169" />

---

## 3. FOUNDATION SETUP FOR SECURITY  (IAM & KMS) 

A strong security posture is foundational to this project, enforced by IAM and KMS.

### Identity and Access Management (IAM)

The principle of **Least Privilege** is followed, ensuring every resource has only the permissions necessary to perform its specific task.

1. **Create IAM Roles**
    * **Navigate** to **Roles** and **Create Role**.
    * **Select** **AWS service** and **EC2** as the use case.
    * **Attach** the custom-created IAM Policy from the previous step.
    * **Name** the role logically .
      
<img width="1366" height="711" alt="Screenshot (2266)" src="https://github.com/user-attachments/assets/8068ca39-3720-4577-a473-7aca0f9e88fd" />


### AWS Key Management Service (KMS)

KMS is used for **Server-Side Encryption with KMS (SSE-KMS)** to protect data at rest in S3 and RDS.

1. **Create Customer Managed Key (CMK):**
    * **Navigate** to **KMS** in the AWS Console.
    * **Select** **Customer managed keys** and **Create key**.
    * **Choose** a symmetric encryption key.
    * **Define Key Administrators** .
    * **Define Key Usage Permissions**
      
 <img width="1366" height="703" alt="Screenshot (1704)" src="https://github.com/user-attachments/assets/84586773-87bb-4973-b754-5dc3ce1b62a4" />
 
 <img width="1366" height="711" alt="Screenshot (1705)" src="https://github.com/user-attachments/assets/93ca5a95-16d0-40f0-b58c-8e9869fe6ca6" />
 
---

## 4. DATA LAYER SETUP (S3 and RDS) 

The data layer is configured for durability, security, and integration with the KMS key.

### Amazon S3 (Raw File Storage)

1. **Create S3 Bucket:**
    * **Navigate** to **S3** and **Create bucket**.
    * **Choose** a globally unique name and region.
    * **Enable** **Default encryption** → **SSE-KMS**.
    * **Select** the KMS created.
    
<img width="1366" height="707" alt="Screenshot (1714)" src="https://github.com/user-attachments/assets/026e0ed7-3234-47c0-8813-05c748275887" />

<img width="1366" height="713" alt="Screenshot (1713)" src="https://github.com/user-attachments/assets/b77af634-aa26-47c8-9460-285fa5f67670" />

      
2. **Set S3 Bucket Policy :**

   ### Amazon RDS 

1. **Create RDS Database Instance:**
    * Choose Aurora MySQL.
    * Place DB inside **Private Subnets**.

   <img width="1366" height="705" alt="Screenshot (1716)" src="https://github.com/user-attachments/assets/c6f34fcb-f194-4182-8563-fe0734a204e0" />
   
   <img width="1366" height="700" alt="Screenshot (1718)" src="https://github.com/user-attachments/assets/3c834283-1c3d-45e2-a9c8-cbf78c941dd2" />

2. **Configure Security Groups:** 

    *Configure security groups for Ec2,Bastion host,ALB,RDS

  <img width="1110" height="231" alt="Screenshot (1953)" src="https://github.com/user-attachments/assets/c517f29a-f0e9-4dc9-baae-96c816a69445" />

  <img width="1366" height="431" alt="Screenshot (1955)" src="https://github.com/user-attachments/assets/9257db8f-291a-4740-bd58-c109bc469c50" />

  <img width="1366" height="413" alt="Screenshot (1954)" src="https://github.com/user-attachments/assets/bd40b5f7-0f2c-45dd-b669-b2d945237358" />


---
## 5. COMPUTE & ML LAYER

### Amazon EC2 & Auto Scaling Group 

**1.Launch the Bastion EC2 Instance **

1. Navigate to **EC2 → Instances → Launch instances**.
2. **Choose an AMI:**  
    Recommended: **Amazon Linux 2**
3. **Select Instance Type:**  
    Example: **t2.micro**
4. **Network Settings:**
    Select your **VPC**
    Choose a **Public Subnet** 
    Enable **Auto-assign Public IP**
5. **Security Group:**
    Attach your Bastion security created
6. **Key Pair:**
    Select or create your **Key Pair** for SSH access.
7. **Launch the instance.**
   
 <img width="1366" height="713" alt="Screenshot (1766)" src="https://github.com/user-attachments/assets/bb5af8f2-b7df-4460-95d3-0b9e79ff9fb5" />

 <img width="1366" height="705" alt="Screenshot (1768)" src="https://github.com/user-attachments/assets/a29d149d-6d4d-4195-ab0a-a6ef411c50ff" />



 **2.Private Ec2 Instance**

 1.Follow the same Ec2 settings above,use **Private Subnet** for this.

<img width="1366" height="713" alt="Screenshot (1720)" src="https://github.com/user-attachments/assets/5c8b12b2-f39f-4b36-82dc-30004568ae09" />

<img width="593" height="577" alt="Screenshot (1721)" src="https://github.com/user-attachments/assets/3156ee21-1fe8-4259-86fa-4d13bd641981" />

<img width="1366" height="709" alt="Screenshot (1723)" src="https://github.com/user-attachments/assets/4b2d1127-5a81-44f3-ad11-a10196f88eaf" />


3. **Create Launch Template** with Amazon linux:

1. **Navigate to:**  
   **EC2 → Launch Templates → Create launch template**

2. **Configuration Details:**

   - **AMI:**  
     Select the base image required for your application  
   
   - **Instance Type:**  
     Choose the appropriate size (e.g., **t2.medium**).

   - **Key Pair:**  
     Select the Key Pair you will use for SSH access  
     (usually via the **Bastion Host**).

   - **Network Settings:**
     - **Subnet:**  

     - **Security Groups:**  
       Select the previously created Ec2 Security group*.
       
     <img width="1366" height="709" alt="Screenshot (1748)" src="https://github.com/user-attachments/assets/7dc2a942-23a8-4377-9a40-47c6ed085350" />

     <img width="1366" height="707" alt="Screenshot (1750)" src="https://github.com/user-attachments/assets/73f7314d-300c-4f06-8f40-271266de3687" />


4. **Create Auto Scaling Group** across Private Subnets
    **Step 4.1 — Open Auto Scaling Console**
   
    Navigate to **EC2 → Auto Scaling Groups → Create Auto Scaling Group**.
   
    Name your group: **Document-Processor-ASG**
   
   <img width="1366" height="707" alt="Screenshot (1752)" src="https://github.com/user-attachments/assets/87ab5dd6-bc63-43ff-9d72-d90cb011eb62" />

   <img width="1366" height="707" alt="Screenshot (1753)" src="https://github.com/user-attachments/assets/bda05124-a654-4964-8861-73fd7ea93390" />

   <img width="1366" height="711" alt="Screenshot (1754)" src="https://github.com/user-attachments/assets/48d5d529-058a-4c1d-be7f-48e9492042c6" />


 ### Application Load Balancer (ALB)

1. Create Target Group
 Navigate to Target Groups**
 Go to **EC2 → Target Groups → Create Target Group**.
 Target Type: **Instances**.

 <img width="1366" height="709" alt="Screenshot (1743)" src="https://github.com/user-attachments/assets/22b9e5b1-b74a-47e9-9fa7-770f1ba5d953" />

2. Create ALB in Public Subnets
   Listener → Forward to Target Group
   Navigate to ALB Console**
   Go to **EC2 → Load Balancers → Create Load Balancer → Application Load Balancer**.

   <img width="1366" height="768" alt="Screenshot (1734)" src="https://github.com/user-attachments/assets/a0cacab0-b667-4a01-8746-d01a2ab480c3" />

   <img width="1366" height="713" alt="Screenshot (1745)" src="https://github.com/user-attachments/assets/a2459a49-6d89-45da-8616-daccd6233326" />

   <img width="1366" height="715" alt="Screenshot (1746)" src="https://github.com/user-attachments/assets/6427870d-1f63-4bb8-bbcb-64cea8fbdaa6" />
 
### Amazon Bedrock - Titan Text G1 – Express

1.Submit use case details for anthropic,Before your EC2 application can call **Titan Text G1-Express**, you must ensure that the model is enabled for your AWS account. Amazon Bedrock requires a one-time approval process for some foundation models, including Titan, to prevent misuse and to ensure the model is used responsibly.

<img width="815" height="691" alt="Screenshot (1898)" src="https://github.com/user-attachments/assets/4ef680ab-0d28-4095-8925-e2489668f3de" />


2.Confirm Titan Text G1-express is responding or else payment informations needs to be updated.

Why This Check Is Needed**
Amazon Bedrock prevents model usage if:
  Model access is not fully enabled  
  The AWS account has **billing issues**, such as:
  No payment method added  
  Payment method expired  
  - Free-tier usage exceeded  

If billing is not active, Bedrock returns errors like:
 **“Unable to invoke model”**
 **“Model access restricted”**
 **“Payment method required”**

<img width="1366" height="701" alt="Screenshot (1998)" src="https://github.com/user-attachments/assets/bc050a3d-bd64-403a-bd0e-6d1ea331cb14" />

<img width="1366" height="705" alt="Screenshot (2003)" src="https://github.com/user-attachments/assets/032c8c95-4112-4664-9bd2-f1cbe2d134db" />


## 6.DEPLOYMENT :

1.Launch the Bastion Host EC2 Instance with Public IP using Putty 

<img width="446" height="437" alt="Screenshot (1782)" src="https://github.com/user-attachments/assets/e4abf6fd-43a7-46dc-8d20-28fa362fa05b" />

<img width="452" height="446" alt="Screenshot (1784)" src="https://github.com/user-attachments/assets/2ae7e744-9a79-406f-b338-9a55ef27d66e" />

2.Connect to Bastion Host from local system 

<img width="1066" height="280" alt="Screenshot (1795)" src="https://github.com/user-attachments/assets/480f406d-b1ab-4530-a89a-fde9321bfed6" />

3.From Bastion → Connect to Private EC2

<img width="1366" height="405" alt="Screenshot (1978)" src="https://github.com/user-attachments/assets/d24a76cd-c8be-4995-89d1-fc33edb20df6" />

4.Verify Connectivity Inside the Private Subnet
ping -c 3 google.com

5.Check your RDS connectivity
telnet <RDS-ENDPOINT> 3306

6.Install Required Application Packages
sudo yum install -y python3
sudo pip3 install boto3 flask

<img width="1366" height="695" alt="Screenshot (1969)" src="https://github.com/user-attachments/assets/896a5dfd-6e65-4ac9-b483-8615bb572cc6" />

7.RDS 

Connect to RDS,create database and table using the password given earlier

mysql -h <RDS-endpoint> -u admin -p

<img width="1366" height="627" alt="Screenshot (1888)" src="https://github.com/user-attachments/assets/bfb218af-4814-43d5-95c9-12c7e6b93797" />

8.Deploy Application Code 
nano app.py

<img width="1366" height="718" alt="Screenshot (1997)" src="https://github.com/user-attachments/assets/8897d778-4a94-48fb-a64e-a7a525bd2cc5" />

For full code : https://github.com/prinku-git/Amazon-Bedrock-Tenant-Document-Summarizer/blob/main/main.py

**This code performs:
PDF upload handling
Reading raw file from S3
Calling Bedrock model
Storing summary in RDS

7.Start the Application Service

python3 app.py

8.Check ALB health status 

<img width="1366" height="711" alt="Screenshot (1876)" src="https://github.com/user-attachments/assets/c91d20f7-4d2f-48f0-92b1-e69fc006783b" />

---

## 6. WORKING CONDITION VERIFICATION :

1. Access ALB DNS

<img width="1366" height="576" alt="Screenshot (1987)" src="https://github.com/user-attachments/assets/6a7dc5ea-85c4-4593-9ae4-ec763a8c5676" />

<img width="1366" height="718" alt="Screenshot (1989)" src="https://github.com/user-attachments/assets/c3707268-4391-4446-9e35-5c5676629d3b" />

3. Upload PDF → Receive summary
   
<img width="1366" height="712" alt="Screenshot (2257)" src="https://github.com/user-attachments/assets/9b529c24-14a1-47df-a732-15c0e64ad3bf" />

<img width="1366" height="667" alt="Screenshot (2028)" src="https://github.com/user-attachments/assets/bfece7b4-57d5-4cf4-a62b-023314f200ff" />

5. Check S3 for raw file
   
7. <img width="1536" height="672" alt="Screenshot S3 raw" src="https://github.com/user-attachments/assets/55ee5970-ece6-43f9-bf82-cd5eb46388a4" />

8. Check RDS from Ec2 instance
   
10. <img width="1366" height="714" alt="Screenshot (2030)" src="https://github.com/user-attachments/assets/207cc516-e831-4440-af8b-cd744343e8ab" />

11. Check CloudWatch,

   <img width="1366" height="707" alt="Screenshot (1932)" src="https://github.com/user-attachments/assets/56f2b309-9e66-4f25-89fb-c53103340a55" />

---

## 7. PROJECT SUMMARY AND CONCLUSION 

This project delivered a production-ready, highly available, and secure AI summarization system based on a multi-layered architecture deployed within AWS. The core solution leverages an Auto Scaling Group (ASG) behind a Multi-AZ Application Load Balancer (ALB) to ensure scalability and resilience across multiple availability zones. Security was implemented by design, utilizing AWS Identity and Access Management (IAM) for least-privilege access, AWS Key Management Service (KMS) for encryption of sensitive data at rest and in transit, and restricting application components to private subnets to minimize the attack surface. The system's central functionality is achieved through direct AI integration using Amazon Bedrock, which provides access to foundation models for the actual PDF summarization task. This architecture successfully establishes a robust and maintainable foundation for enterprise-grade AI services.

---
